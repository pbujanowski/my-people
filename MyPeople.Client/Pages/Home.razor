@page "/"
@using MyPeople.Services.Posts.Application.Dtos
@using MyPeople.Services.Posts.Application.Services
@inject IPostService PostService
@attribute [Authorize]

<PageTitle>My People - Home</PageTitle>

<PostList Posts="Posts" />

@code {
    public IEnumerable<PostDto> Posts { get; set; } = Enumerable.Empty<PostDto>();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await GetPostsAsync();
    }

    private async Task GetPostsAsync()
    {
        Posts = await PostService.GetAllPostsAsync();
    }
}
